(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const e=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={},this.head=0,this.tail=0}var n,i;return n=e,(i=[{key:"enqueue",value:function(t){this.elements[this.tail++]=t}},{key:"dequeue",value:function(){var t=this.elements[this.head];return delete this.elements[this.head++],t}},{key:"peek",value:function(){return this.elements[this.head]}},{key:"length",get:function(){return this.tail-this.head}},{key:"isEmpty",get:function(){return 0===this.length}}])&&t(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,a,r=[],u=!0,o=!1;try{for(n=n.call(t);!(u=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);u=!0);}catch(t){o=!0,a=t}finally{try{u||null==n.return||n.return()}finally{if(o)throw a}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function t(e,n,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=null,this.targetData=null,this.map=null,this.queue=null,this.path=e,this.background=n,this.window=i,this.canvas=a,this.context=a.getContext("2d"),this.finished=!1}var i,r;return i=t,r=[{key:"load",value:function(t){var e=this,n=new Image;n.crossOrigin="*",n.onload=function(){var i=document.createElement("canvas"),a=i.getContext("2d"),r=n.width,u=n.height,o=e.canvas,h=o.width,l=o.height;i.width=h,i.height=l;var s=r/2-h/2,c=u/2-l/2;a.drawImage(n,-s,-c),e.data=a.getImageData(0,0,h,l),a.clearRect(0,0,h,l),t&&t()},n.src=this.path}},{key:"setup",value:function(){this._initializeTargetData(),this._initializeMap(),this._initializeQueue()}},{key:"update",value:function(){if(!this.finished)for(var t=this.window.devicePixelRatio,e=this.data.width*t*.25,n=0;n<e;++n){if(this.queue.isEmpty){var i=this._getMiddlemostIndex();if(!(i>-1)){this.finished=!0;break}this.queue.enqueue(i)}var a=this.data,r=a.height,u=a.width,o=this.queue.dequeue();0==this.map[o]&&(this.map[o]=2,this.targetData.data[4*o+3]=0,o>=u&&this.queue.enqueue(o-u),o%(u+1)!=0&&this.queue.enqueue(o-1),o<u*(r-1)&&this.queue.enqueue(o+u),o%u!=0&&this.queue.enqueue(o+1))}}},{key:"render",value:function(){this.context.putImageData(this.targetData,0,0)}},{key:"_initializeTargetData",value:function(){this.targetData=new ImageData(this.data.width,this.data.height);for(var t=this.targetData.data,e=0;e<t.length/4;++e){var i=n(this.background,3),a=i[0],r=i[1],u=i[2],o=4*e;t[o]=a,t[o+1]=r,t[o+2]=u,t[o+3]=255}}},{key:"_initializeMap",value:function(){var t=this.data.data;this.map=new Uint8Array(Math.floor(t.length/4));for(var e=0,i=0;i<t.length/4;++i){var a=n(this.background,3),r=a[0],u=a[1],o=a[2],h=4*i,l=t[h],s=t[h+1],c=t[h+2],d=1;l==r&&s==u&&c==o||(d=0),this.map[e]=d,++e}}},{key:"_initializeQueue",value:function(){this.queue=new e}},{key:"_getMiddlemostIndex",value:function(){for(var t=new Int32Array(this.map.length),e=0,n=0;n<this.map.length;++n)0==this.map[n]&&(t[e++]=n);return 0==e?-1:t[Math.round((e-1)/2)]}}],r&&a(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),t}();const u=r;var o=document.querySelector(".gradient-layer"),h=document.querySelector(".cover-layer"),l=window.devicePixelRatio,s=window.document.body,c=s.clientWidth,d=s.clientHeight,f=new u("".concat("../images/background",l>1?"/pattern-dpi-2x.png":"/pattern-dpi-1x.png"),[23,23,23],window,h),y=Date.now(),g=y;function p(){window.requestAnimationFrame(p);var t=(y=Date.now())-g,e=1e3/60;t>e&&(g=y-t%e,f.update(),f.render())}h.width=c*l,h.height=d*l,h.style.width="".concat(c,"px"),h.style.height="".concat(d,"px"),f.load((function(){o.style.visibility="visible",f.setup(),console.log(f),p()}))})();