(()=>{"use strict";function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const t=function(){function t(e,i,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.rgba=new Uint8Array([e,i,r,a])}var i,r;return i=t,(r=[{key:"equalTo",value:function(e){for(var t=0;t<3;++t)if(e.rgba[t]!=this.rgba[t])return!1;return!0}},{key:"unpack",value:function(){return[this.rgba[0],this.rgba[1],this.rgba[2],this.rgba[3]]}}])&&e(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),t}();function i(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={},this.head=0,this.tail=0}var t,r;return t=e,(r=[{key:"enqueue",value:function(e){this.elements[this.tail++]=e}},{key:"dequeue",value:function(){var e=this.elements[this.head];return delete this.elements[this.head++],e}},{key:"peek",value:function(){return this.elements[this.head]}},{key:"length",get:function(){return this.tail-this.head}},{key:"isEmpty",get:function(){return this.length<=0}}])&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(t,i,r,a){var n=a.x,o=void 0===n?0:n,s=a.y,u=void 0===s?0:s,h=a.range,l=void 0===h?20:h,c=a.value,d=void 0===c?2:c,v=a.spread,p=void 0===v?100:v,f=a.conservative,g=void 0!==f&&f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=o,this.y=u,this.value=d,this.range=l,this.spreadCurrent=0,this.spreadLimit=p,this.spreadQueue=null,this.isConservative=g,this.isFilling=!0,this.isFinished=!1,this.map=t,this.width=i,this.height=r}var t,i;return t=e,i=[{key:"setup",value:function(){this._initializeSpreadQueue(0)}},{key:"update",value:function(){if(!this.isFinished){if((this.spreadQueue.isEmpty||this.isFilling&&this.spreadCurrent>=this.spreadLimit)&&(this._initializeSpreadQueue(this.value),this.isFilling=!1),!this.isFilling&&this.spreadQueue.isEmpty)return this.spreadCurrent=0,void(this.isFinished=!0);var e=this.height,t=this.width,i=this.spreadQueue.dequeue(),r=this.isFilling?0:this.value,a=this.isFilling?this.value:0;this.map[i]==r&&i>=t&&i<=t*(e-1)&&(i+1)%t!=0&&(this.map[i]=a,this.spreadQueue.enqueue(i-t),this.spreadQueue.enqueue(i+t),this.spreadQueue.enqueue(i-1),this.spreadQueue.enqueue(i+1),this.isFilling&&this.spreadCurrent++)}}},{key:"_initializeSpreadQueue",value:function(e){this.spreadQueue=new r;for(var t=this.x,i=this.y,a=this.width,n=this.height,o=i*a+t,s=1,u=0;s<this.range;){var h=o-a*s,l=o+a*s,c=o-s,d=o+s;h>=0&&this.map[h]==e&&!(1&u)&&(this.spreadQueue.enqueue(h),this.isConservative&&(u|=1)),l<=a*n-1&&this.map[l]==e&&!(2&u)&&(this.spreadQueue.enqueue(l),this.isConservative&&(u|=2)),Math.floor(c/a)!=i||this.map[c]!=e||4&u||(this.spreadQueue.enqueue(c),this.isConservative&&(u|=4)),Math.floor(d/a)!=i||this.map[d]!=e||8&u||(this.spreadQueue.enqueue(d),this.isConservative&&(u|=8)),++s}}}],i&&a(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();const o=n;function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var r,a,n=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function h(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(i,r,a,n){var o=n.sourceBackgroundColor,s=void 0===o?new t(0,0,0):o,u=n.targetBackgroundColor,h=void 0===u?new t(0,0,0):u,l=n.targetForegroundColor,c=void 0===l?new t(100,100,100):l,d=n.targetActiveForegroundColor,v=void 0===d?new t(255,255,255):d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceData=null,this.targetData=null,this.width=null,this.height=null,this.sourceMap=null,this.sourceMapIndices=null,this.sourcePath=i,this.sourceBackgroundColor=s,this.targetBackgroundColor=h,this.targetForegroundColor=c,this.targetActiveForegroundColor=v,this.emitters=[],this.window=r,this.canvas=a,this.context=a.getContext("2d"),this.isFinished=!1}var i,r;return i=e,r=[{key:"load",value:function(e){var t=this,i=new Image;i.crossOrigin="*",i.onload=function(){var r=document.createElement("canvas"),a=r.getContext("2d"),n=i.width,o=i.height,s=t.canvas,u=s.width,h=s.height;r.width=u,r.height=h;var l=n/2-u/2,c=o/2-h/2;a.drawImage(i,-l,-c),t.sourceData=a.getImageData(0,0,u,h),t.width=u,t.height=h,a.clearRect(0,0,u,h),e&&e()},i.src=this.sourcePath}},{key:"setup",value:function(){this._initializeSourceMap(),this._initializeSourceMapIndices(),this._initializeTargetData()}},{key:"update",value:function(){for(var e=this.emitters.length-1;e>=0;--e)for(var t=this.emitters[e],i=(t.isConservative?.05:.15)*t.spreadLimit,r=0;r<i;++r)if(t.update(),t.isFinished){this.emitters.splice(e,1);break}var a=this.targetData.data;for(e=0;e<this.sourceMapIndices.length;++e){var n=this.sourceMapIndices[e],o=s((0==this.sourceMap[n]?this.targetForegroundColor:this.targetActiveForegroundColor).unpack(),4),u=o[0],h=o[1],l=o[2],c=o[3],d=4*n;a[d]=u,a[d+1]=h,a[d+2]=l,a[d+3]=c}}},{key:"render",value:function(){this.context.putImageData(this.targetData,0,0)}},{key:"createEmitter",value:function(e,t,i,r,a){var n=this.sourceMap,s=this.width,u=this.height,h=this.emitters.length,l=h>0?(this.emitters[h-1].value+1)%256:2,c=new o(n,s,u,{x:e,y:t,value:l,range:i,spread:r,conservative:a});c.setup(),this.emitters.push(c)}},{key:"createRandomEmitter",value:function(e,t,i){var r=Math.floor(Math.random()*this.width),a=Math.floor(Math.random()*this.height);this.createEmitter(r,a,e,t,i)}},{key:"_initializeSourceMap",value:function(){var e=this.sourceData.data;this.sourceMap=new Uint8Array(Math.floor(.25*e.length));for(var i=0,r=0;r<e.length/4;++r){var a=4*r,n=new t(e[a],e[a+1],e[a+2],e[a+3]),o=1;this.sourceBackgroundColor.equalTo(n)||(o=0),this.sourceMap[i]=o,++i}}},{key:"_initializeSourceMapIndices",value:function(){for(var e=new Uint32Array(this.sourceMap.length),t=0,i=0;i<this.sourceMap.length;++i)1!=this.sourceMap[i]&&(e[t++]=i);this.sourceMapIndices=new Uint32Array(t);for(var r=0;r<t;++r)this.sourceMapIndices[r]=e[r]}},{key:"_initializeTargetData",value:function(){this.targetData=new ImageData(this.sourceData.width,this.sourceData.height);for(var e=this.targetData.data,t=s(this.targetBackgroundColor.unpack(),4),i=t[0],r=t[1],a=t[2],n=t[3],o=s(this.targetForegroundColor.unpack(),4),u=o[0],h=o[1],l=o[2],c=o[3],d=0;d<e.length/4;++d){var v=4*d;e[v]=i,e[v+1]=r,e[v+2]=a,e[v+3]=n}for(var p=0;p<this.sourceMapIndices.length;++p){var f=4*this.sourceMapIndices[p];e[f]=u,e[f+1]=h,e[f+2]=l,e[f+3]=c}}}],r&&h(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),e}();const c=l;var d,v,p,f,g,y,m,w=document.querySelector(".loader-layer"),b=document.querySelector(".content-layer"),k=document.querySelector(".cover-layer"),C=window.document.body,M=C.clientWidth,F=C.clientHeight;function D(){window.requestAnimationFrame(D);var e=(p=Date.now())-f,t=1e3/g;e>t&&(f=p-e%t,function(){if(d.update(),y-m>=1500){for(var e=0;e<3;++e)d.createRandomEmitter(250,25e3,!0);m=y}y=Date.now()}(),d.render())}function I(e){if(!(d.emitters.length>=20)){var t=e.pageX*v,i=e.pageY*v;d.createEmitter(t,i,250,35e3)}}!function(){w.style.zIndex="99",w.style.display="block",b.style.visibility="hidden";var e,i,r,a,n=(e="../images/background",i=window,r=i.devicePixelRatio,a=i.innerWidth,{scale:Math.max(2,r),finalPath:"".concat(e,a>480?"/pattern-desktop.png":"/pattern-mobile.png")});v=n.scale,d=new c(n.finalPath,window,k,{sourceBackgroundColor:new t(23,23,23,255),targetBackgroundColor:new t(0,0,139,255),targetForegroundColor:new t(8,22,209,255),targetActiveForegroundColor:new t(0,0,0,0)}),p=Date.now(),f=p,g=60,k.width=Math.ceil(M*v),k.height=Math.ceil(F*v),k.style.width="".concat(M,"px"),k.style.height="".concat(F,"px"),d.load((function(){w.style.display="none",b.style.visibility="visible",d.setup(),y=Date.now(),m=y,D(),document.addEventListener("click",I)}))}()})();