(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const t=function(){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.rgb=new Uint8Array([e,n,r])}var n,r;return n=t,(r=[{key:"equalTo",value:function(e){for(var t=0;t<3;++t)if(e.rgb[t]!=this.rgb[t])return!1;return!0}},{key:"unpack",value:function(){return[this.rgb[0],this.rgb[1],this.rgb[2]]}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={},this.head=0,this.tail=0}var t,r;return t=e,(r=[{key:"enqueue",value:function(e){this.elements[this.tail++]=e}},{key:"dequeue",value:function(){var e=this.elements[this.head];return delete this.elements[this.head++],e}},{key:"peek",value:function(){return this.elements[this.head]}},{key:"length",get:function(){return this.tail-this.head}},{key:"isEmpty",get:function(){return 0===this.length}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(n,r,i,a){var o=a.sourceBackgroundColor,u=void 0===o?new t(0,0,0):o,l=a.targetBackgroundColor,s=void 0===l?new t(0,0,0):l,c=a.targetForegroundColor,h=void 0===c?new t(255,255,255):c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceData=null,this.targetData=null,this.width=null,this.height=null,this.sourceMap=null,this.sourceMapIndices=null,this.indexQueue=null,this.sourcePath=n,this.sourceBackgroundColor=u,this.targetBackgroundColor=s,this.targetForegroundColor=h,this.window=r,this.canvas=i,this.context=i.getContext("2d"),this.isFinished=!1}var n,a;return n=e,a=[{key:"load",value:function(e){var t=this,n=new Image;n.crossOrigin="*",n.onload=function(){var r=document.createElement("canvas"),i=r.getContext("2d"),a=n.width,o=n.height,u=t.canvas,l=u.width,s=u.height;r.width=l,r.height=s;var c=a/2-l/2,h=o/2-s/2;i.drawImage(n,-c,-h),t.sourceData=i.getImageData(0,0,l,s),t.width=l,t.height=s,e&&e()},n.src=this.sourcePath}},{key:"setup",value:function(){this._initializeSimpleMap(),this._initializeSimpleMapIndices(),this._initializeTargetData(),this._initializeIndexQueue()}},{key:"update",value:function(){}},{key:"render",value:function(){this.context.putImageData(this.targetData,0,0)}},{key:"spawnEmitterAt",value:function(e,t){}},{key:"_initializeSimpleMap",value:function(){var e=this.sourceData.data;this.sourceMap=new Uint8Array(Math.floor(.25*e.length));for(var n=0,r=0;r<e.length/4;++r){var i=4*r,a=new t(e[i],e[i+1],e[i+2]),o=1;this.sourceBackgroundColor.equalTo(a)||(o=0),this.sourceMap[n]=o,++n}}},{key:"_initializeSimpleMapIndices",value:function(){for(var e=new Uint32Array(this.sourceMap.length),t=0,n=0;n<this.sourceMap.length;++n)1!=this.sourceMap[n]&&(e[t++]=n);this.sourceMapIndices=new Uint32Array(t);for(var r=0;r<t;++r)this.sourceMapIndices[r]=e[r]}},{key:"_getSimpleMapIndices",value:function(e){for(var t=new Uint32Array(this.sourceMapIndices.length),n=0,r=0;r<this.sourceMapIndices.length;++r){var i=this.sourceMapIndices[r];this.sourceMap[i]==e&&(t[n++]=i)}for(var a=new Uint32Array(n),o=0;o<n;++o)a[o]=t[o];return a}},{key:"_initializeTargetData",value:function(){this.targetData=new ImageData(this.sourceData.width,this.sourceData.height);for(var e=this.targetData.data,t=i(this.targetBackgroundColor.unpack(),3),n=t[0],r=t[1],a=t[2],o=i(this.targetForegroundColor.unpack(),3),u=o[0],l=o[1],s=o[2],c=0;c<e.length/4;++c){var h=4*c;e[h]=n,e[h+1]=r,e[h+2]=a,e[h+3]=255}for(var d=0;d<this.sourceMapIndices.length;++d){var f=4*this.sourceMapIndices[d];e[f]=u,e[f+1]=l,e[f+2]=s}}},{key:"_initializeIndexQueue",value:function(){this.indexQueue=new r}},{key:"_getMiddlemostIndex",value:function(){var e=this._getSimpleMapIndices(0);return 0==e.length?-1:e[Math.round(.5*(e.length-1))]}}],a&&o(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),e}();const l=u;var s,c,h,d,f=document.querySelector(".loader-layer"),g=document.querySelector(".content-layer"),y=document.querySelector(".cover-layer"),p=window.document.body,v=p.clientWidth,w=p.clientHeight;function m(){window.requestAnimationFrame(m);var e=(c=Date.now())-h,t=1e3/d;e>t&&(h=c-e%t,s.update(),s.render())}!function(){f.style.zIndex="99",f.style.display="block",g.style.visibility="hidden";var e,n,r,i,a=(e="../images/background",n=window,r=n.devicePixelRatio,i=n.innerWidth,{scale:Math.max(2.5,r),finalPath:"".concat(e,i>480?"/pattern-desktop.png":"/pattern-mobile.png")}),o=a.scale;s=new l(a.finalPath,window,y,{sourceBackgroundColor:new t(23,23,23),targetBackgroundColor:new t(0,0,139),targetForegroundColor:new t(0,0,255)}),console.log(s),c=Date.now(),h=c,d=60,y.width=Math.ceil(v*o),y.height=Math.ceil(w*o),y.style.width="".concat(v,"px"),y.style.height="".concat(w,"px"),s.load((function(){f.style.display="none",g.style.visibility="visible",s.setup(),m()}))}()})();